<?xml version="1.0" encoding="utf-8"?>
<device schemaVersion="1.1" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:noNamespaceSchemaLocation="CMSIS-SVD.xsd" >
    <vendor>SiFive</vendor>
    <name>FU540</name>
    <version>1.0</version>
    <description>SiFive Freedom U540 64-bit RISC-V CPU</description>

    <addressUnitBits>8</addressUnitBits>
    <width>64</width>
    <size>32</size>
    <access>read-write</access>
    <resetValue>0x00000000</resetValue>
    <resetMask>0xFFFFFFFF</resetMask>
    
    <peripherals>
        <!-- MSEL -->
        <peripheral>
            <name>MSEL</name>
            <description>Mode Select</description>
            <groupName>MSEL</groupName>
            <baseAddress>0x00001000</baseAddress>
            <registers>
                <register>
                    <name>MSEL</name>
                    <description>The MSEL pin state</description>
                    <addressOffset>0x0000</addressOffset>
                    <fields>
                        <field>
                            <name>MSEL</name>
                            <bitRange>[3:0]</bitRange>
                            <access>read-only</access>
                        </field>
                    </fields>
                </register>
            </registers>
        </peripheral>
        <!-- MSEL -->
        
        <!-- UART0 -->
        <peripheral>
            <name>UART0</name>
            <description>Universal Asynchronous Receiver Transmitter 0</description>
            <groupName>UART</groupName>
            <baseAddress>0x10010000</baseAddress>
            <registers>
                <!-- Data Registers -->
                <register>
                    <name>txdata</name>
                    <description>Transmit Data Register</description>
                    <addressOffset>0x00</addressOffset>
                    <fields>
                        <field>
                            <name>data</name>
                            <description>Transmit data</description>
                            <bitRange>[7:0]</bitRange>
                        </field>
                        <field>
                            <name>full</name>
                            <description>Transmit FIFO full</description>
                            <bitRange>[31:31]</bitRange>
                        </field>
                    </fields>
                </register>

                <register>
                    <name>rxdata</name>
                    <description>Receive Data Register</description>
                    <addressOffset>0x04</addressOffset>
                    <fields>
                        <field>
                            <name>data</name>
                            <description>Received data</description>
                            <bitRange>[7:0]</bitRange>
                        </field>
                        <field>
                            <name>empty</name>
                            <description>Receive FIFO empty</description>
                            <bitRange>[31:31]</bitRange>
                        </field>
                    </fields>
                </register>
                <!-- Data Registers -->

                <!-- Control Registers -->
                <register>
                    <name>txctrl</name>
                    <description>Transmit Control Register</description>
                    <addressOffset>0x08</addressOffset>
                    <fields>
                        <field>
                            <name>txen</name>
                            <description>Transmit enable</description>
                            <bitRange>[0:0]</bitRange>
                        </field>
                        <field>
                            <name>nstop</name>
                            <description>Number of stop bits</description>
                            <bitRange>[1:1]</bitRange>
                        </field>
                        <field>
                            <name>txcnt</name>
                            <description>Transmit watermark level</description>
                            <bitRange>[18:16]</bitRange>
                        </field>
                    </fields>
                </register>

                <register>
                    <name>rxctrl</name>
                    <description>Receive Control Register</description>
                    <addressOffset>0x0C</addressOffset>
                    <fields>
                        <field>
                            <name>rxen</name>
                            <description>Receive enable</description>
                            <bitRange>[0:0]</bitRange>
                        </field>
                        <field>
                            <name>rxcnt</name>
                            <description>Receive watermark level</description>
                            <bitRange>[18:16]</bitRange>
                        </field>
                    </fields>
                </register>
                <!-- Control Registers -->

                <!-- Interrupt Registers -->
                <register>
                    <name>ie</name>
                    <description>Interrupt Enable Register</description>
                    <addressOffset>0x10</addressOffset>
                    <fields>
                        <field>
                            <name>txwm</name>
                            <description>Transmit watermark interrupt enable</description>
                            <bitRange>[0:0]</bitRange>
                        </field>
                        <field>
                            <name>rxwm</name>
                            <description>Receive watermark interrupt enable</description>
                            <bitRange>[1:1]</bitRange>
                        </field>
                    </fields>
                </register>

                <register>
                    <name>ip</name>
                    <description>Interrupt Pending Register</description>
                    <addressOffset>0x14</addressOffset>
                    <fields>
                        <field>
                            <name>txwm</name>
                            <description>Transmit watermark interrupt pending</description>
                            <bitRange>[0:0]</bitRange>
                        </field>
                        <field>
                            <name>rxwm</name>
                            <description>Receive watermark interrupt pending</description>
                            <bitRange>[1:1]</bitRange>
                        </field>
                    </fields>
                </register>
                <!-- Interrupt Registers -->

                <!-- Configuration Registers -->
                <register>
                    <name>div</name>
                    <description>Baud Rate Divisor Register</description>
                    <addressOffset>0x18</addressOffset>
                    <resetValue>289</resetValue>
                    <fields>
                        <field>
                            <name>value</name>
                            <description>Baud rate divisor</description>
                            <bitRange>[19:0]</bitRange>
                        </field>
                    </fields>
                </register>
                <!-- Configuration Registers -->
            </registers>
        </peripheral>
        <!-- UART0 -->

        <!-- UART1 -->
        <peripheral derivedFrom="UART0">
            <name>UART1</name>
            <description>Universal Asynchronous Receiver Transmitter 1</description>
            <baseAddress>0x10011000</baseAddress>
        </peripheral>
        <!-- UART1 -->
    </peripherals>
</device>
